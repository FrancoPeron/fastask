var E=Object.defineProperty;var q=(s,r,o)=>r in s?E(s,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[r]=o;var x=(s,r,o)=>(q(s,typeof r!="symbol"?r+"":r,o),o);const O=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const i of e)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&t(c)}).observe(document,{childList:!0,subtree:!0});function o(e){const i={};return e.integrity&&(i.integrity=e.integrity),e.referrerpolicy&&(i.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?i.credentials="include":e.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(e){if(e.ep)return;e.ep=!0;const i=o(e);fetch(e.href,i)}};O();const D=window.MicroModal;D.init();function T(s,r,o){let t=document.querySelector("[board]"),e=document.querySelector("[btnTrash]"),i={clientX:void 0,clientY:void 0,movementX:0,movementY:0},c,d,h=3,g=(n,l,m)=>{c=n.clientX,d=n.clientY,n.preventDefault(),i.clientY=n.clientY,i.clientX=n.clientX,document.onmousemove=a=>{if(Math.abs(a.clientX-c)>h||Math.abs(a.clientY-d)>h){a.preventDefault(),i.movementY=i.clientY-a.clientY,i.movementX=i.clientX-a.clientX,i.clientX=a.clientX,i.clientY=a.clientY,l.style.top=l.offsetTop-i.movementY+"px",l.style.left=l.offsetLeft-i.movementX+"px";let p={posY:l.style.top,posX:l.style.left};localStorage.setItem(`${l.getAttribute("id")}Pos`,JSON.stringify(p)),M(a,l)}},document.onmouseup=a=>{document.onmouseup=null,document.onmousemove=null,w(a,l),u(a,l,m)}},f=()=>{for(let n=0;n<document.querySelectorAll(`[${s}Item]`).length;n++){let l=document.querySelectorAll(`[${s}Item]`)[n];l.classList.add("itemMoveBlock");const m=p=>{g(p,l)},a=p=>{Math.abs(p.clientX-c)<h&&Math.abs(p.clientY-d)<h&&(console.log("itemEditable"),l.classList.remove("itemMoveBlock"),l.classList.add("itemMoveEditable"),l.onmousedown=null,t.addEventListener("mousedown",k=>{k.target==k.currentTarget&&(l.classList.remove("itemMoveEditable"),l.classList.add("itemMoveBlock"),l.onmousedown=m)}))};l.onmousedown=m,l.onmouseup=a}},I=n=>{let l=document.querySelectorAll(`[${s}Item]`),m=Number(n.getAttribute("id").replace(/^\D+/g,""));n.remove(),localStorage.setItem(`cant-${s}s`,localStorage.getItem(`cant-${s}s`)-1);for(let a=m;a<localStorage.getItem(`cant-${s}s`);a++)localStorage.setItem(`${s}${a}`,localStorage.getItem(`${s}${a+1}`)),localStorage.setItem(`${s}${a}Pos`,localStorage.getItem(`${s}${a+1}Pos`)),l[a+1].id=`${s}${a}`;localStorage.removeItem(`${s}${localStorage.getItem(`cant-${s}s`)}`),localStorage.removeItem(`${s}${localStorage.getItem(`cant-${s}s`)}Pos`),localStorage.removeItem(`${s}${localStorage.getItem(`cant-${s}s`)}title`)},u=(n,l,m)=>{!(t.getBoundingClientRect().top-60<l.offsetTop-i.movementY&&n.clientY<t.getBoundingClientRect().bottom&&t.getBoundingClientRect().left+100<l.offsetLeft-i.movementX&&n.clientX<t.getBoundingClientRect().right)&&m&&I(l)},w=(n,l)=>{e.getBoundingClientRect().top<n.clientY&&n.clientY<e.getBoundingClientRect().bottom&&e.getBoundingClientRect().left<n.clientX&&n.clientX<e.getBoundingClientRect().right&&I(l)},M=(n,l)=>{e.getBoundingClientRect().top<n.clientY&&n.clientY<e.getBoundingClientRect().bottom&&e.getBoundingClientRect().left<n.clientX&&n.clientX<e.getBoundingClientRect().right?l.classList.add("trashOpacity"):l.classList.remove("trashOpacity")};o(g,f);for(let n=0;n<localStorage.getItem(`cant-${s}s`);n++)t.insertAdjacentHTML("beforeend",r(n));return f(),{drag:g,listenItems:f}}let b="text",L=s=>`<text-item textItem id="text${s}" class="textItem p-24 br-4 shadow bg-c4 z-20"></text-item>`;function X(s,r){let o=document.querySelector("[board]");document.querySelector(`[btn-${b}]`).addEventListener("mousedown",t=>{t.preventDefault(),o.insertAdjacentHTML("beforeend",L(document.querySelectorAll(`[${b}Item]`).length)),localStorage.setItem(`cant-${b}s`,document.querySelectorAll(`[${b}Item]`).length);const e=Array.from(document.querySelectorAll(`[${b}Item]`)).pop();s(t,e,!0),r()})}T(b,L,X);class Y extends HTMLElement{constructor(){super(),this.textData=JSON.parse(localStorage.getItem(`${this.getAttribute("id")}`))||""}connectedCallback(){console.log(`${this.getAttribute("id")} ADDED TO THE DOM`),this.firstPos=JSON.parse(localStorage.getItem(`${this.getAttribute("id")}Pos`))||{posY:"10px",posX:"16px"},this.style.top=this.firstPos.posY,this.style.left=this.firstPos.posX,this.printTodos()}disconnectedCallback(){console.info("Todo REMOVED TO THE DOM")}printTodos(){this.innerHTML=`
        
        <main class="text-modal c-white" id="modal-1-content">
            <div id="${this.getAttribute("id")}editor">${this.textData}</div>
        </main>
        `,this.obsChanges()}obsChanges(){var r=new Quill(`#${this.getAttribute("id")}editor`,{modules:{toolbar:[["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"},{align:[]}],[{indent:"-1"},{indent:"+1"}],["code-block"]]},theme:"snow"});let o=this.getAttribute("id");document.querySelector(`#${o}editor`).addEventListener("DOMSubtreeModified",t=>{localStorage.setItem(`${o}`,JSON.stringify(r.root.innerHTML))})}}window.customElements.define("text-item",Y);let y="todo",v=s=>`<todo-item todoItem id="todo${s}" class="todoItem p-24 br-4 shadow bg-c4 z-20"></todo-item>`;function N(s,r){let o=document.querySelector("[board]");document.querySelector(`[btn-${y}]`).addEventListener("mousedown",t=>{t.preventDefault(),o.insertAdjacentHTML("beforeend",v(document.querySelectorAll(`[${y}Item]`).length)),localStorage.setItem(`cant-${y}s`,document.querySelectorAll(`[${y}Item]`).length);const e=Array.from(document.querySelectorAll(`[${y}Item]`)).pop();s(t,e,!0),r()})}T(y,v,N);class B extends HTMLElement{constructor(){super();x(this,"getTargetId",o=>{let t=null,e=Array.from(this.querySelector("[taskItems]").children);return e.forEach(i=>{i.contains(o.target)&&(t=e.indexOf(i))}),t});this.todos=JSON.parse(localStorage.getItem(`${this.getAttribute("id")}`))||[{id:0,done:!1,content:""}]}connectedCallback(){console.log(`${this.getAttribute("id")} ADDED TO THE DOM`),this.firstPos=JSON.parse(localStorage.getItem(`${this.getAttribute("id")}Pos`))||{posY:"46px",posX:"16px"},this.style.top=this.firstPos.posY,this.style.left=this.firstPos.posX,this.printTodos()}disconnectedCallback(){console.info("Todo REMOVED TO THE DOM")}taskItem(o){return`   
            <li id="task${this.todos[o].id}" class="task-item flex flex-row justify-between align-items-start my-4">

                <div class="flex flex-row align-items-start flex-fill">
                    <input todo-check class="checkbox mr-16 mt-4" type="checkbox" ${this.todos[o].done?"checked":""}>
                    <p todo-task class="task fw-6 f-b1 c-g1" placeholder="Add a task..." contenteditable="true" tabindex="1">${this.todos[o].content}</p>
                </div>
                
                <svg todo-trash class="trash cursor-pointer p-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30">
                    <g transform="translate(-89.25 -860.75)">
                        <line class="trash-a" x2="24" transform="translate(90.5 867)"/>
                        <path class="trash-b" d="M2,0h8a2,2,0,0,1,2,2V5a0,0,0,0,1,0,0H0A0,0,0,0,1,0,5V2A2,2,0,0,1,2,0Z" transform="translate(96.5 862)"/>
                        <path class="trash-b" d="M0,0H18L16,17a3,3,0,0,1-3,3H5a3,3,0,0,1-3-3Z" transform="translate(93.5 867)"/>
                    </g>
                </svg>

                <!-- <div class="flex flex-row justify-end">
                <button class="btn-text b-trans f-b2 fw-6 c-c1 ml-8" @click="removeAllTodos">Remove All</button>
                <button class="btn-text b-trans f-b2 fw-6 c-c1 ml-8" @click="markAllDone">Mark All</button>
            
                </div> -->
                
            </li>
            `}printTodos(){this.innerHTML='<ul taskItems class="flex flex-column"></ul>';let o=this.querySelector("[taskItems]");o.innerHTML="";for(let t=0;t<this.todos.length;t++)o.insertAdjacentHTML("beforeend",this.taskItem(t));this.obsChanges()}obsChanges(){let o=this.querySelector("[taskItems]");o.addEventListener("keydown",t=>{let e=this.getTargetId(t);e!=-1&&this.enterKey(t,e)}),o.addEventListener("keyup",t=>{let e=this.getTargetId(t);e!=-1&&this.addArray(t,e)}),o.addEventListener("click",t=>{let e=this.getTargetId(t);e!=-1&&(this.getBoleanClick(t,e,"[todo-trash]")&&this.todos.length>1&&this.deleteArray(e),this.checkBtn(t,e))})}getBoleanClick(o,t,e){return this.querySelector("[taskItems]").children[t].querySelector(e).contains(o.target)}setCursor(o,t){let i=Array.from(this.querySelector("[taskItems]").children)[o].querySelector("[todo-task]");const c=window.getSelection(),d=document.createRange();t==="start"?d.setStart(i,0):(d.selectNodeContents(i),d.collapse(!1)),c.removeAllRanges(),c.addRange(d),i.focus()}getCaretIndex(o){let t=0;if(typeof window.getSelection!="undefined"&&window.getSelection().rangeCount!==0){const c=window.getSelection().getRangeAt(0),d=c.cloneRange();d.selectNodeContents(o),d.setEnd(c.endContainer,c.endOffset),d.startContainer.innerText.includes(`
`)?t=d.toString().length+1:t=d.toString().length}return t}addArray(o,t){this.todos[t]={id:t,done:!1,content:o.target.innerText},localStorage.setItem(`${this.getAttribute("id")}`,JSON.stringify(this.todos))}deleteArray(o){for(let t=o;t<this.todos.length;t++)this.todos[t].id=t-1;this.todos.splice(o,1),this.printTodos(),localStorage.setItem(`${this.getAttribute("id")}`,JSON.stringify(this.todos))}checkBtn(o,t){this.getBoleanClick(o,t,"[todo-check]")&&(this.todos[t].done=!this.todos[t].done,this.printTodos()),localStorage.setItem(`${this.getAttribute("id")}`,JSON.stringify(this.todos))}enterKey(o,t){if(o.key=="Enter"&&!o.shiftKey){o.preventDefault(),this.todos.splice(t+1,0,{id:t+1,done:!1,content:""});for(let e=t+2;e<this.todos.length;e++)this.todos.length!=2&&(this.todos[e].id=e);this.printTodos(),this.setCursor(t+1,"start"),console.log(this.todos)}}}window.customElements.define("todo-item",B);let S="doc",C=s=>`<document-item docItem id="doc${s}" class="documentItem flex-column-nowrap align-items-center z-20"></document-item>`;function P(s,r){let o=document.querySelector("[board]");document.querySelector(`[btn-${S}]`).addEventListener("mousedown",t=>{t.preventDefault(),o.insertAdjacentHTML("beforeend",C(document.querySelectorAll(`[${S}Item]`).length)),localStorage.setItem(`cant-${S}s`,document.querySelectorAll(`[${S}Item]`).length);const e=Array.from(document.querySelectorAll(`[${S}Item]`)).pop();s(t,e,!0),r()})}T(S,C,P);class R extends HTMLElement{constructor(){super(),this.main=document.getElementsByTagName("main")[0],this.docTitle=JSON.parse(localStorage.getItem(`${this.getAttribute("id")}title`))||"New Document",this.docData=JSON.parse(localStorage.getItem(`${this.getAttribute("id")}`))||""}connectedCallback(){console.log(`${this.getAttribute("id")} ADDED TO THE DOM`),this.firstPos=JSON.parse(localStorage.getItem(`${this.getAttribute("id")}Pos`))||{posY:"160px",posX:"0px"},this.style.top=this.firstPos.posY,this.style.left=this.firstPos.posX,this.printDocs(this.docTitle)}disconnectedCallback(){console.log("Document REMOVED TO THE DOM")}printDocs(){this.innerHTML=`<svg class="mb-4" height="80" viewBox="0 0 60 72" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M4 8C4 5.79086 5.79086 4 8 4H42L56 18V64C56 66.2091 54.2091 68 52 68H8C5.79086 68 4 66.2091 4 64L4 8Z" fill="#39383E"/>
        <path d="M42 4L56 18H42V4Z" fill="#424147"/>
        <path d="M43.4142 2.58579L42.8284 2H42H8C4.68629 2 2 4.68629 2 8V64C2 67.3137 4.68629 70 8 70H52C55.3137 70 58 67.3137 58 64V18V17.1716L57.4142 16.5858L43.4142 2.58579Z" class="doc_outline" />
        <path d="M31 30L43 30" stroke="white" stroke-width="2.5" stroke-linecap="round"/>
        <path d="M31 38L43 38" stroke="white" stroke-width="2.5" stroke-linecap="round"/>
        <path d="M17 46H43" stroke="white" stroke-width="2.5" stroke-linecap="round"/>
        <path d="M24.6467 28.4062V31.2734H24.3655C24.1988 30.612 24.0139 30.138 23.8108 29.8516C23.6076 29.5599 23.329 29.3281 22.9748 29.1562C22.7769 29.0625 22.4306 29.0156 21.9358 29.0156H21.1467V37.1875C21.1467 37.7292 21.1753 38.0677 21.2326 38.2031C21.2951 38.3385 21.4123 38.4583 21.5842 38.5625C21.7613 38.6615 22.0009 38.7109 22.303 38.7109H22.6545V39H17.1076V38.7109H17.4592C17.7665 38.7109 18.0139 38.6562 18.2014 38.5469C18.3368 38.474 18.4436 38.349 18.5217 38.1719C18.579 38.0469 18.6076 37.7188 18.6076 37.1875V29.0156H17.842C17.1285 29.0156 16.6102 29.1667 16.2873 29.4688C15.8342 29.8906 15.5477 30.4922 15.428 31.2734H15.1311V28.4062H24.6467Z" fill="white"/>
        </svg>
        <h2 ${this.getAttribute("id")}title class="title doc__title-board f-st2 fw-6 c-c4" placeholder="Add a title..." contenteditable="true">${this.docTitle}</h2>`,this.main.insertAdjacentHTML("afterend",`<div class="modal micromodal-slide" id="${this.getAttribute("id")}item" aria-hidden="true">
            <div class="modal__overlay" tabindex="-1">
                <div class="modal__container bg-c4 br-12 mx-24" role="dialog" aria-modal="true" aria-labelledby="modal-1-title">
                <header class="modal__header px-24 py-28">
                    <h2 ${this.getAttribute("id")}title class="title f-st1 c-white" placeholder="Add a title..." contenteditable="true">${this.docTitle}</h2>
                    <button class="modal__close c-white" aria-label="Close modal" data-micromodal-close/>
                </header>
                <main class="modal__content c-white" id="modal-1-content">
                    <div id="${this.getAttribute("id")}editor">${this.docData}</div>
                </main>
                </div>
            </div>
        </div>`),this.obsChanges()}obsChanges(){var r=new Quill(`#${this.getAttribute("id")}editor`,{modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{color:[]},{background:[]}],[{indent:"-1"},{indent:"+1"}],[{list:"ordered"},{list:"bullet"},{align:[]}],[{script:"sub"},{script:"super"}],["clean"],[{header:[1,2,3,4,5,6,!1]}],[{font:[]}]]},theme:"snow"});let o=this.getAttribute("id");this.addEventListener("dblclick",()=>{MicroModal.show(`${o}item`)}),document.querySelector(`#${o}editor`).addEventListener("DOMSubtreeModified",e=>{localStorage.setItem(`${o}`,JSON.stringify(r.root.innerHTML))}),document.querySelector(`#${o}item`).addEventListener("click",e=>{localStorage.setItem(`${o}`,JSON.stringify(r.root.innerHTML))});let t=document.querySelectorAll(`[${o}title]`);for(let e=0;e<t.length;e++)t[e].addEventListener("keyup",i=>{this.docTitle=i.target.innerHTML,localStorage.setItem(`${o}title`,JSON.stringify(this.docTitle)),t[e]==t[0]&&(t[1].innerHTML=this.docTitle)});document.querySelector('[aria-label="Close modal"]').addEventListener("click",e=>{this.printDocs()})}}window.customElements.define("document-item",R);let $="img",H=s=>`<image-item imgItem id="img${s}" class="flex imgItem shadow z-20"></image-item>`,_=document.querySelector("[btn-img]"),A=document.querySelector("[boxImg]");A.style.display="none";_.addEventListener("click",s=>{A.style.display==="none"?A.style.display="flex":A.style.display="none"});function J(s,r){let o=document.querySelector("[board]"),t=document.querySelector("[inputSearch]"),e="client_id=btXOFRZKl5DqSAUkiX3C7gDBD7odWcz5_t4dU2ChBMI",i;const c=async h=>{const g={method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}};try{const I=await(await fetch(`https://api.unsplash.com/${h}&${e}`,g)).json();h==d?i=I:i=I.results,unplashImgs.innerHTML="";for(let u=0;u<i.length;u++)unplashImgs.insertAdjacentHTML("beforeend",`<img class="unplash__img" src="${i[u].urls.regular}" alt="">`);for(let u=0;u<document.querySelectorAll(".unplash__img").length;u++)document.querySelectorAll(".unplash__img")[u].addEventListener("click",w=>{A.style.display="none",console.log(w.target.currentSrc),localStorage.setItem(`img${document.querySelectorAll(`[${$}Item]`).length}`,w.target.currentSrc),o.insertAdjacentHTML("beforeend",H(document.querySelectorAll(`[${$}Item]`).length)),localStorage.setItem(`cant-${$}s`,document.querySelectorAll(`[${$}Item]`).length);const M=Array.from(document.querySelectorAll(`[${$}Item]`)).pop();r()})}catch(f){console.log(f)}};let d="photos/?per_page=30";c(d),t.addEventListener("keyup",h=>{if(console.log(t.value),t.value.toString()!=""){let g=`search/photos/?per_page=30&query=${t.value}`;c(g)}else c(d)})}T($,H,J);class z extends HTMLElement{constructor(){super(),this.srcImg=localStorage.getItem(`${this.getAttribute("id")}`)}connectedCallback(){console.log(`${this.getAttribute("id")} ADDED TO THE DOM`),this.firstPos=JSON.parse(localStorage.getItem(`${this.getAttribute("id")}Pos`))||{posY:"200px",posX:"160px"},this.style.top=this.firstPos.posY,this.style.left=this.firstPos.posX,this.size=JSON.parse(localStorage.getItem(`${this.getAttribute("id")}Size`))||{width:"auto",height:"auto"},this.style.width=this.size.width+"px",this.style.height=this.size.height+"px",this.printImg(),this.obsSize()}printImg(){this.innerHTML=`<img class="w-100 h-100 object-cover" draggable="false" src="${this.srcImg}" alt="">`}obsSize(){new ResizeObserver(()=>{this.size.width=this.offsetWidth,this.size.height=this.offsetHeight,localStorage.setItem(`${this.getAttribute("id")}Size`,JSON.stringify(this.size)),console.log(this.offsetWidth)}).observe(this)}}window.customElements.define("image-item",z);
